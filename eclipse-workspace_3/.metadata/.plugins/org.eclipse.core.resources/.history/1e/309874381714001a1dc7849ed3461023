<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html>
<html>
<head>
	<!-- <meta charset="ISO-8859-1"> -->
	<title>Insert title here</title>
	<script type="text/javascript">
		async function retreiveData() // GET
		{		
		  	const response = await fetch(window.location.href + '/data');
		  	const tableData = await response.json(); //extract JSON from the http response
		  	var parsed = JSON.parse(tableData);
			var table = document.getElementById('output_table');
			var vals = '';
			for (row in parsed)
			{
				var rowString = '<tr>';
				for (val in row)
				{
					rowString += '<td>' + val + '</td>'
				}
				rowString += '</tr>'
				vals += rowString;
			}
			table.innerHTML = vals;
		}
		window.onload = retreiveData;
	</script>
</head>
<body>
	<h3>Data</h3>
	<table id="output_table"></table>
</body>
</html>